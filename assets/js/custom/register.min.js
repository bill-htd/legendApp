document.getElementById("exdata").value=localStorage.getItem("exdata")||"";document.getElementById("acount").value=localStorage.getItem("acount")||"";var serverList=[];var serverPort=9001;var address="";var serverId=1;var paramObj={httpUrl:"http://ezz25.com/gm/index.php?m=ServerInfo&a=server_list",type:"post"};var self=this;this.loading=$.openCustomLoading("数据请求中");httpRequest(paramObj,function(e){self.loading.hide();var t=JSON.parse(e);if(t.code==0){for(var r=0;r<t.data.length;r++){if(t.data[r].is_test==2){serverList.push(t.data[r])}}var a=localStorage.getItem("selectedIndex");if(a){for(var s=0;s<serverList.length;s++){if(serverList[s].server_id==a){var n=serverList[s];document.getElementById("serverName").innerHTML=n.server_name;serverPort=n.server_port;address=n.database_host;serverId=n.server_id}}}else{var n=serverList[0];document.getElementById("serverName").innerHTML=n.server_name;serverPort=n.server_port;address=n.database_host;serverId=n.server_id}}else{alert(t.msg)}});function check_code(){var e=document.getElementById("acount").value;var t=document.getElementById("code_msg");var r=/^\w{6,10}$/;if(r.test(e)){t.className="ok";t.innerHTML="*账号必须为6-10位字母、数字、下划线"}else{t.className="error";t.innerHTML="* 账号必须为6-10位字母、数字、下划线"}}function check_pwd(){var e=document.getElementById("exdata").value;var t=document.getElementById("code_msg");var r=/^\w{8,20}$/;if(r.test(e)){t.className="ok";t.innerHTML="*密码必须为8-10位字母、数字、下划线"}else{t.className="error";t.innerHTML="*密码必须为8-10位字母、数字、下划线"}}function GetRequest(){var e=decodeURI(window.location.search);var t=new Object;if(e.indexOf("?")!=-1){var r=e.substr(1);strs=r.split("&");for(var a=0;a<strs.length;a++){t[strs[a].split("=")[0]]=unescape(strs[a].split("=")[1])}}return t}function button_onclick(){var o=document.getElementById("acount").value;var l=document.getElementById("exdata").value;var e=/^\w{6,10}$/;var t=/^\w{8,20}$/;if(!e.test(o)||!t.test(l)){alert("格式错误，请重新输入");return}var r=undefined;r=GetRequest();var a=r["lx"];if(!a){a="ceshi"}localStorage.setItem("exdata",l);localStorage.setItem("acount",o);var s={httpUrl:"https://ezz25.com/gm?m=Regi&a=index&",type:"post",data:{name:o,serverid:serverId,password:hex_md5(l),ID_card:o,channel:a}};var d=this;this.loading=$.openCustomLoading("登录中，长时间未响应请刷新网页");httpRequest(s,function(e){var t=JSON.parse(e);if(t.status==1){var r={httpUrl:"https://ezz25.com/gm?m=Regi&a=check_user&",type:"post",data:{name:o,serverid:serverId,password:hex_md5(l)}};httpRequest(r,function(e){d.loading.hide();var t=JSON.parse(e);if(t.status==1){var r=window.location.href.split("?");var a=r[0];var s=a+"?srvid="+serverId+"&user="+o+"&spverify="+hex_md5(l)+"&serverid="+serverId+"&srvaddr="+address+"&srvport="+serverPort;var n={};n.id="eE";n.urlParam=s;window.parent.postMessage(n,"*");fullScreen()}else{alert(t.info)}})}else{d.loading.hide();alert(t.info)}},function(){d.loading.hide();alert("网络错误")})}function launchFullscreen(){var e=document.documentElement;var t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;if(typeof t!="undefined"&&t){t.call(e)}}function fullScreen(){if(!this.isFullScreen()){if(confirm("是否进入全屏？")){launchFullscreen()}else{}}}function isFullScreen(){return document.isFullScreen||document.mozIsFullScreen||document.webkitIsFullScreen}function httpRequest(e,t,r){var a=null;if(window.XMLHttpRequest){a=new XMLHttpRequest}else if(window.ActiveXObject){a=new ActiveXObject("Microsoft.XMLHTTP")}if(a==null){alert("你的浏览器不支持XMLHttp");return}var s=(e.type||"GET").toUpperCase();var n=e.dataType||"json";var o=e.httpUrl||"";var l=e.async||true;var d=e.data||[];var i="";for(var c in d){i+=c+"="+d[c]+"&"}i=i==""?"":i.substring(0,i.length-1);a.onreadystatechange=function(){if(a.readyState==4&&a.status==200){t(a.responseText)}else{r}};if(s=="GET"){a.open("GET",o,l);a.send(null)}else if(s=="POST"){o+=i;a.open("POST",o,l);a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(i)}}